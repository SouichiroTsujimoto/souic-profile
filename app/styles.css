/* 全体のコンテナスタイル */
.card-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  max-width: 800px;
  margin: 0 auto;
  gap: 20px;
}

body {
  perspective: 1500px; /* 3D効果用のパースペクティブを追加 */
  background-color: hsl(240, 67%, 94%); /* #E6E6FAをHSL表記に変更 */
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  padding: 0;
  overflow: hidden;
}

.card-wrapper {
  transform: rotateX(var(--rx, 0deg)) rotateY(var(--ry, 0deg)); /* 回転に変更 */
  transition: transform 0.05s linear; 
  aspect-ratio: .716;
  display: grid;
  height: 70vh; /* 画面の高さの70%に設定 */
  width: auto; /* 幅は高さに合わせて自動調整 */
  place-items: center;
  position: absolute;
  /* will-change: transform, filter; /* GPUアクセラレーションのヒント */
  /* transform-style: preserve-3d; 子要素も3D空間に配置 */
}

/* スマートフォン向けのスタイル */
@media screen and (max-width: 768px) {
  .card-wrapper {
    transform: rotateX(var(--rx, 0deg)) rotateY(var(--ry, 0deg)); /* 回転に変更 */
    transition: transform 0.05s linear; 
    aspect-ratio: .716;
    display: grid;
    width: 80vw; /* 幅は高さに合わせて自動調整 */
    height: auto; /* 画面の高さの70%に設定 */
    place-items: center;
    position: absolute;
    /*will-change: transform, filter; /* GPUアクセラレーションのヒント */
    /* transform-style: preserve-3d; 子要素も3D空間に配置 */
  }
}


/* 中央に戻るときのトランジション */
.card-wrapper.return-to-center {
  transition: transform 0.5s cubic-bezier(0.23, 1, 0.32, 1);
}

.card-wrapper:hover > .highlight {
  background: radial-gradient(circle at var(--mx, 25%) var(--my, 25%), 
              rgba(255,255,255,.8) 10%, 
              rgba(255,255,255,.65) 20%, 
              transparent 60%);
  mix-blend-mode: overlay;
  /* will-change: filter; GPUアクセラレーションのヒント */
}

.color {
  mix-blend-mode: color-dodge;
  display: grid;
}

.card-wrapper > .color {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCI+CjxmaWx0ZXIgaWQ9Im4iPgo8ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjciIG51bU9jdGF2ZXM9IjEwIiBzdGl0Y2hUaWxlcz0ic3RpdGNoIj48L2ZlVHVyYnVsZW5jZT4KPC9maWx0ZXI+CjxyZWN0IHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiBmaWxsPSIjMDAwIj48L3JlY3Q+CjxyZWN0IHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiBmaWx0ZXI9InVybCgjbikiIG9wYWNpdHk9IjAuMyI+PC9yZWN0Pgo8L3N2Zz4="),
        repeating-linear-gradient( 0deg, 
        rgb(255, 119, 115) 5%, 
        rgba(255,237,95,1) 10%, 
        rgba(168,255,95,1) 15%, 
        rgba(131,255,247,1) 20%, 
        rgba(120,148,255,1) 25%, 
        rgb(216, 117, 255) 30%, 
        rgb(255, 119, 115) 35%
        ),
        repeating-linear-gradient( 
        133deg, 
        #0e152e 0%, 
        hsl(180, 10%, 60%) 3.8%, 
        hsl(180, 10%, 60%) 5.2%, 
        #0e152e 10% , 
        #0e152e 12% 
        ),
        radial-gradient(
        farthest-corner circle 
        at var(--mx, 50%) var(--my, 50%),
        rgba(0, 0, 0, .1) 12%, 
        rgba(0, 0, 0, .15) 20%, 
        rgba(0, 0, 0, .25) 120%
        );
  background-blend-mode: screen, hue, hard-light;
  background-size: 500px 100%, 200% 700%, 300% 100%, 200% 100%;
  background-position: center, 0% var(--posy, 50%), var(--posx, 50%) var(--posy, 50%), var(--posx, 50%) var(--posy, 50%);
  filter: brightness(.8) contrast(2.95) saturate(.5);  
  /* will-change: filter; */
}

.card-wrapper > .color::after {
  content: "";
  grid-area: 1/1;
  background-image: radial-gradient(farthest-corner ellipse at calc( ((var(--mx)) * 0.5) + 25% ) calc( ((var(--my)) * 0.5) + 25% ), rgb(255, 255, 255) 5%, rgba(55, 0, 55, .6) 25%, rgb(55, 55, 55) 90%);
  background-size: 500px 100%, 200% 400%, 195% 100%, 200% 100%;
  background-position: center, 0% var(--posy), calc( var(--posx) * -1) calc( var(--posy) * -1), var(--posx) var(--posy);
  filter: brightness(1) contrast(2.5) saturate(1.75);
  mix-blend-mode: soft-light;
  /* will-change: filter; */
}

.card-wrapper > .color::after {
  background-image: url("data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iNTAwIiBoZWlnaHQ9IjUwMCI+CjxmaWx0ZXIgaWQ9Im4iPgo8ZmVUdXJidWxlbmNlIHR5cGU9ImZyYWN0YWxOb2lzZSIgYmFzZUZyZXF1ZW5jeT0iLjciIG51bU9jdGF2ZXM9IjEwIiBzdGl0Y2hUaWxlcz0ic3RpdGNoIj48L2ZlVHVyYnVsZW5jZT4KPC9maWx0ZXI+CjxyZWN0IHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiBmaWxsPSIjMDAwIj48L3JlY3Q+CjxyZWN0IHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIiBmaWx0ZXI9InVybCgjbikiIG9wYWNpdHk9IjAuMyI+PC9yZWN0Pgo8L3N2Zz4="),
        repeating-linear-gradient( 0deg, 
        rgb(255, 119, 115) 5%, 
        rgba(255,237,95,1) 10%, 
        rgba(168,255,95,1) 15%, 
        rgba(131,255,247,1) 20%, 
        rgba(120,148,255,1) 25%, 
        rgb(216, 117, 255) 30%, 
        rgb(255, 119, 115) 35%
        ),
        repeating-linear-gradient( 
        133deg, 
        #0e152e 0%, 
        hsl(180, 10%, 60%) 3.8%, 
        hsl(180, 10%, 60%) 5.2%, 
        #0e152e 10% , 
        #0e152e 12% 
        ),
        radial-gradient(
        farthest-corner circle 
        at var(--mx) var(--my),
        rgba(0, 0, 0, .1) 12%, 
        rgba(0, 0, 0, .15) 20%, 
        rgba(0, 0, 0, .25) 120%
        );
    background-blend-mode: screen, hue, hard-light;
}

/*形を整える*/
.card {
  border-radius: 5% / 3.5%;
  box-shadow: 0 0px 20px rgba(0,0,0,0.2);
  height: 100%;
  position: absolute;
  width: 100%;
  overflow: hidden;
}
/* メインコンテンツのスタイルを修正 */
.card.main-content {
  z-index: 15;
  display: flex;
  justify-content: center;
  align-items: center;
  pointer-events: auto; /* クリックイベントを有効にする */
  transform-style: preserve-3d; /* 3D効果を維持 */
}

/* リンクのスタイル調整 */
.main-content a {
  display: inline-block;
  text-decoration: none;
  margin: 10px;
  transition: transform 0.2s ease;
  position: relative;
  z-index: 20;
}

.main-content a:hover {
  transform: scale(1.05);
}

/* ハイライトのポインターイベントを無効化し、z-indexを最上部に */
.card.highlight {
  pointer-events: none;
  z-index: 25;
  transform-style: preserve-3d; /* 3D効果を維持 */
  background: radial-gradient(
    circle at var(--posx, 25%) var(--posy, 25%),
    rgba(255, 255, 255, 0.8) 0%,
    rgba(255, 255, 255, 0) 50%
  );
  mix-blend-mode: overlay;
} 
